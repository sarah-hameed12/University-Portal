/* === App.css (Modern Version for Aesthetics) === */

/* --- Base Variables & Font --- */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');

:root {
  --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  /* Refined Dark Theme Palette */
  --bg-main: #0c1317; --bg-app: #101b20; --bg-sidebar: #101b20; --bg-chat-area: #0b141a;
  --bg-input-area: #1f2c34; --bg-input-field: #2a3942; --bg-hover-item: #222e35; --bg-active-item: #2a3942;
  --text-primary: #e1e9f1; --text-secondary: #8595a0; --text-input: #dde1e5; --text-white: #ffffff;
  --text-sender: #53bdeb; /* Sender name color */
  --bubble-outgoing-bg: #005c4b; --bubble-incoming-bg: #202c33;
  --bubble-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
  --accent-primary: #00a884; --accent-secondary: #039474; --border-color: #222e35; --icon-color: #8696a0;
  --focus-ring-color: rgba(0, 168, 132, 0.4); --scrollbar-thumb: #374045; --scrollbar-track: transparent;
  --border-radius-small: 3px; --border-radius-medium: 8px; --border-radius-large: 8px;
  --padding-xs: 4px; --padding-s: 8px; --padding-m: 12px; --padding-l: 16px; --padding-xl: 20px;
  --sidebar-width: 300px;
}

/* --- Global Resets & Base Styles --- */
html { height: 100%; box-sizing: border-box; font-size: 15px; }
*, *::before, *::after { box-sizing: inherit; margin: 0; padding: 0; }
body {
  font-family: var(--font-primary); background-color: var(--bg-main); color: var(--text-primary);
  height: 100%; overflow: hidden; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; line-height: 1.5;
}
#root { height: 100%; }

/* --- Main App Layout --- */
.App { display: flex; height: 100%; background-color: var(--bg-app); overflow: hidden; }

/* --- User List Sidebar --- */
.users {
  display: flex; flex-direction: column; width: var(--sidebar-width); flex-shrink: 0;
  background-color: var(--bg-sidebar); border-right: 1px solid var(--border-color); overflow-y: auto; position: relative;
}
.user-list-header {
    padding: var(--padding-l) var(--padding-l) var(--padding-s); font-size: 0.9rem; font-weight: 600; color: var(--text-secondary);
    border-bottom: 1px solid var(--border-color); margin-bottom: var(--padding-xs); position: sticky; top: 0;
    background-color: var(--bg-sidebar); z-index: 10;
}
.sidebar-placeholder { padding: var(--padding-l); color: var(--text-secondary); text-align: center; margin-top: 20px; }
.use { /* Styles for user list items */
  display: flex; align-items: center; padding: var(--padding-m) var(--padding-l); margin: 0 var(--padding-s) 2px;
  border-radius: var(--border-radius-medium); cursor: pointer; transition: background-color 0.1s ease-in-out; gap: var(--padding-m);
  border: none; font-size: 0.9rem; font-weight: 500; color: var(--text-primary); white-space: nowrap; overflow: hidden;
  text-overflow: ellipsis; position: relative;
}
.use label { flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; cursor: pointer; margin: 0; padding: 0; }
.use input[type="checkbox"] { appearance: none; -webkit-appearance: none; -moz-appearance: none; position: absolute; opacity: 0; width: 0; height: 0; cursor: pointer; }
.use:hover { background-color: var(--bg-hover-item); }
.use.active { background-color: var(--bg-active-item); }
.use.active::before { content: ''; position: absolute; left: 0; top: 25%; bottom: 25%; width: 3px; background-color: var(--accent-primary); border-radius: 0 2px 2px 0; }

/* --- Main Chat Area Container --- */
.together { /* This holds messages + input */
  display: flex; flex-direction: column; flex: 1; background-color: var(--bg-chat-area); overflow: hidden; height: 100%;
}
.login-view-wrapper { display: flex; flex: 1; align-items: center; justify-content: center; background-color: var(--bg-chat-area); }

/* --- Message Display Area (MODERN STRUCTURE) --- */
.message-list-container { /* Scrollable container */
  flex: 1; /* Takes up available space */
  overflow-y: auto; /* Allows scrolling */
  padding: var(--padding-s) var(--padding-xl);
  display: flex;
  flex-direction: column; /* <<< KEY: Newest visually at bottom */
  background-color: var(--bg-chat-area);
  scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}
.message-placeholder { text-align: center; padding: var(--padding-xl); color: var(--text-secondary); font-style: italic; margin-top: auto; margin-bottom: auto; }

/* --- Individual Message Wrapper (MODERN STRUCTURE) --- */
.message { /* Wrapper for each bubble */
  display: flex; margin-bottom: 6px; width: 100%; padding: 0 1%;
}

/* --- Message Bubble Common Styles (MODERN STRUCTURE) --- */
.mess, .my_mess { /* These are DIVs now */
  padding: 7px var(--padding-m); border-radius: var(--border-radius-large); max-width: 75%; word-wrap: break-word;
  line-height: 1.45; box-shadow: var(--bubble-shadow); font-size: 0.92rem; display: flex; flex-direction: column; /* Normal internal order */
  position: relative; min-height: 30px;
}
.mess { /* Incoming bubble */
  background-color: var(--bubble-incoming-bg); color: var(--text-primary); margin-right: auto; border-top-left-radius: var(--border-radius-small);
}
.my_mess { /* Outgoing bubble */
  background-color: var(--bubble-outgoing-bg); color: var(--text-white); margin-left: auto; border-top-right-radius: var(--border-radius-small);
}

/* --- Content Inside Bubbles (MODERN STRUCTURE) --- */
.sender-name { font-size: 0.78rem; font-weight: 600; margin-bottom: 3px; color: var(--text-sender); padding-right: var(--padding-l); }
.message-text { padding-bottom: 15px; padding-right: 50px; word-wrap: break-word; }
.message-timestamp { font-size: 0.7rem; color: var(--text-secondary); position: absolute; bottom: 5px; right: var(--padding-m); white-space: nowrap; line-height: 1; }
.my_mess .message-timestamp { color: rgba(255, 255, 255, 0.6); }

/* --- Chat Input Area Container --- */
.frm { /* Fixed input bar container */
  padding: var(--padding-m) var(--padding-l); background-color: var(--bg-input-area); border-top: 1px solid var(--border-color);
  flex-shrink: 0; /* Prevents shrinking */ z-index: 10;
}

/* --- Form Element (Input + Button) (`C1.js`) --- */
.forms { display: flex; align-items: center; gap: var(--padding-m); }
.forms input[type="text"] {
  flex: 1; padding: 11px var(--padding-m); border: none; border-radius: var(--border-radius-medium);
  background-color: var(--bg-input-field); color: var(--text-input); font-size: 0.95rem; font-family: inherit;
  outline: none; transition: box-shadow 0.2s ease-in-out;
}
.forms input::placeholder { color: var(--text-secondary); opacity: 1; }
.forms input:focus { box-shadow: 0 0 0 2px var(--focus-ring-color); }

/* --- Send Button (`C1.js`) --- */
.send-button {
  flex-shrink: 0; padding: 0; background-color: transparent; color: var(--icon-color); border: none; border-radius: 50%;
  cursor: pointer; display: flex; align-items: center; justify-content: center; transition: color 0.15s ease, transform 0.1s ease;
  width: 44px; height: 44px; outline: none;
}
.send-button:disabled { cursor: not-allowed; opacity: 0.5; }
.send-button:not(:disabled):hover { color: var(--accent-primary); }
.send-button:not(:disabled):active { transform: scale(0.9); }
.send-button svg { width: 26px; height: 26px; fill: currentColor; }

/* --- Login Form Styling (`C1.js`) --- */
.signin-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: var(--padding-xl); height: 100%; width: 100%; }
.signin { display: flex; flex-direction: column; gap: var(--padding-m); padding: var(--padding-xl); background-color: var(--bg-input-area); border-radius: var(--border-radius-medium); box-shadow: 0 4px 12px rgba(0,0,0,0.3); width: 100%; max-width: 320px; }
.signin h2 { text-align: center; color: var(--text-primary); margin-bottom: var(--padding-l); font-weight: 600; }
.signin input[type="text"], .signin input[type="password"] { padding: 11px var(--padding-m); border: 1px solid var(--border-color); border-radius: var(--border-radius-small); background-color: var(--bg-input-field); color: var(--text-input); font-size: 0.95rem; font-family: inherit; outline: none; transition: box-shadow 0.2s ease-in-out, border-color 0.2s ease-in-out; }
.signin input[type="text"]::placeholder, .signin input[type="password"]::placeholder { color: var(--text-secondary); }
.signin input[type="text"]:focus, .signin input[type="password"]:focus { border-color: var(--accent-primary); box-shadow: 0 0 0 2px var(--focus-ring-color); }
.login-button { padding: 10px var(--padding-m); background-color: var(--accent-primary); color: var(--text-white); border: none; border-radius: var(--border-radius-small); font-size: 1rem; font-weight: 500; cursor: pointer; transition: background-color 0.2s ease-in-out; margin-top: var(--padding-s); }
.login-button:hover { background-color: var(--accent-secondary); }
.error-message { color: #ff6b6b; font-size: 0.85rem; text-align: center; margin-top: var(--padding-s); min-height: 1.2em; }

/* --- Scrollbar Styling --- */
.users::-webkit-scrollbar, .message-list-container::-webkit-scrollbar { width: 7px; }
.users::-webkit-scrollbar-track, .message-list-container::-webkit-scrollbar-track { background: var(--scrollbar-track); margin: 3px 0; }
.users::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb); border-radius: 4px; border: 1px solid var(--bg-sidebar); }
.message-list-container::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb); border-radius: 4px; border: 1px solid var(--bg-chat-area); }
.users::-webkit-scrollbar-thumb:hover, .message-list-container::-webkit-scrollbar-thumb:hover { background-color: #4a545b; }
.users, .message-list-container { scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track); }

/* --- Cleanup Rule (No longer needed if Mess.js is updated) --- */
/* .messages, .tex, .sender, .me_sender { display: none !important; } */


/* --- C1.jsx Styling Additions --- */
.chat-input-form {
    position: relative; /* For preview positioning if needed */
    display: flex;
    align-items: center; /* Align items vertically */
    padding: 8px 12px;
    background-color: var(--bg-input-area, #f0f0f0); /* Example background */
    border-top: 1px solid var(--border-color, #ddd);
}

.input-area {
    display: flex;
    flex-grow: 1;
    align-items: center;
    background-color: var(--bg-input, #fff); /* Input background */
    border-radius: 18px; /* Rounded corners for the input area */
    padding: 0px 8px 0px 15px; /* Padding inside */
    margin-right: 8px;
    border: 1px solid var(--border-color-input, #ccc);
}

.input-area input[type="text"] {
    flex-grow: 1;
    border: none;
    outline: none;
    padding: 10px 5px;
    background: transparent; /* Make input transparent */
    font-size: 0.95rem;
    color: var(--text-primary, #333);
}

/* Style the label to look like a button */
.file-input-label {
    cursor: pointer;
    padding: 8px;
    margin-left: 8px;
    color: var(--icon-color, #555);
    transition: color 0.2s ease;
}
.file-input-label:hover {
    color: var(--icon-color-hover, #000);
}
.file-input-label.disabled {
    cursor: not-allowed;
    opacity: 0.5;
}

.image-preview-container {
    position: absolute; /* Position above input */
    bottom: 100%; /* Place it right above the form */
    left: 10px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #ccc;
    border-radius: 5px;
    padding: 5px;
    margin-bottom: 5px; /* Space between preview and input form */
    max-width: 150px; /* Limit preview width */
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: flex; /* Use flexbox for positioning remove button */
    align-items: flex-start; /* Align items to top */
}

.image-preview {
    max-width: 100%;
    max-height: 100px; /* Limit preview height */
    display: block;
    object-fit: contain;
}

.remove-preview-btn {
    background: rgba(0,0,0,0.5);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    padding: 0;
    margin-left: 5px;
    font-size: 12px;
    line-height: 14px; /* Adjust line height */
    width: 16px; /* Fixed width */
    height: 16px; /* Fixed height */
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute; /* Position inside container */
    top: -5px; /* Adjust position */
    right: -5px; /* Adjust position */
}
.remove-preview-btn:hover {
    background: rgba(0,0,0,0.8);
}

.error-message.input-error {
    position: absolute;
    bottom: 100%;
    left: 150px; /* Adjust position */
    margin-bottom: 8px;
    background-color: var(--error-bg, #ffebee);
    color: var(--error-text, #c62828);
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.8rem;
    z-index: 10; /* Ensure it's above preview */
}


/* Basic Spinner CSS */
.spinner {
  border: 3px solid rgba(255, 255, 255, 0.3); /* Light grey */
  border-top: 3px solid #fff; /* White */
  border-radius: 50%;
  width: 18px;
  height: 18px;
  animation: spin 1s linear infinite;
  margin: auto; /* Center if needed */
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* --- Messages.jsx Styling Additions --- */
.message-image-container {
    margin-bottom: 5px; /* Space between image and text/timestamp */
    max-width: 250px; /* Max width for images */
    border-radius: 8px; /* Optional rounded corners for container */
    overflow: hidden; /* Clip image to container bounds */
}

.message-image {
    display: block; /* Remove extra space below image */
    width: 100%; /* Make image fill container width */
    height: auto; /* Maintain aspect ratio */
    cursor: pointer; /* Optional: indicate it might be clickable */
     /* Add transition if you plan lightbox effect */
}

/* Adjust padding/margins for messages containing only images */
.mess:has(.message-image):not(:has(.message-text)),
.my_mess:has(.message-image):not(:has(.message-text)) {
    padding: 5px; /* Reduce padding slightly maybe */
    background-color: transparent; /* Image might provide the 'bubble' */
}

/* Specific alignment if needed */
.my_mess .message-image-container {
  margin-left: auto; /* Align to right for outgoing */
}
.mess .message-image-container {
  margin-right: auto; /* Align to left for incoming */
}